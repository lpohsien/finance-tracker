Metadata-Version: 2.4
Name: finance-tracker
Version: 0.1.0
Summary: Telegram bot for tracking personal finance
Requires-Python: >=3.13
Description-Content-Type: text/markdown
Requires-Dist: python-telegram-bot>=21.0
Requires-Dist: python-dateutil>=2.8.2
Requires-Dist: python-dotenv>=1.0.0
Requires-Dist: google-genai>=1.56.0
Requires-Dist: pytest>=8.0.0
Provides-Extra: backend
Requires-Dist: fastapi>=0.109.0; extra == "backend"
Requires-Dist: uvicorn[standard]>=0.27.0; extra == "backend"
Requires-Dist: sqlalchemy>=2.0.25; extra == "backend"
Requires-Dist: pydantic>=2.6.0; extra == "backend"
Requires-Dist: python-jose[cryptography]>=3.3.0; extra == "backend"
Requires-Dist: passlib[argon2]>=1.7.4; extra == "backend"
Requires-Dist: python-multipart>=0.0.9; extra == "backend"
Requires-Dist: cryptography>=42.0.0; extra == "backend"

# Finance Tracker Web App

A modern, full-stack finance tracker application featuring a React frontend, FastAPI backend, and Telegram Bot integration.

## Features

- **Dashboard**: Visual overview of income, expenses, and budget status.
- **Transactions**: Add, view, filter, and delete transactions.
- **Smart Parse**: Paste bank SMS/Notifications to automatically extract details (Regex + LLM).
- **Telegram Bot**: Continue using the existing bot alongside the web app.
- **Apple Shortcuts**: Integrate with Siri/Shortcuts via API Token.
- **Secure**: JWT Authentication and encrypted API Key storage.

## Tech Stack

- **Frontend**: React, TypeScript, Vite, Tailwind CSS, shadcn/ui, TanStack Query.
- **Backend**: FastAPI, SQLAlchemy (SQLite), Pydantic.
- **Deployment**: Docker (Multi-stage build).

## Prerequisites

- Docker & Docker Compose
- Python 3.13+ (for local dev)
- Node.js 20+ (for local dev)

## Quick Start (Docker)

1. **Clone the repo**
2. **Set up Environment**:
   Create a `.env` file (see `.env.example`).
   ```bash
   SECRET_KEY=your_secret_key
   ENCRYPTION_KEY=your_fernet_key # Generate via python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
   ```
3. **Run**:
   ```bash
   docker-compose up --build
   ```
   - Web App: `http://localhost:5173` (Dev) or `http://localhost:8000` (Prod build via backend)
   - API Docs: `http://localhost:8000/docs`

## Local Development

### Backend

1. Install `uv`: `pip install uv`
2. Create venv: `uv venv` && `source .venv/bin/activate`
3. Install deps: `uv pip install -e .[backend]`
4. Run:
   ```bash
   uvicorn api.main:app --reload
   ```

### Frontend

1. `cd frontend`
2. `npm install`
3. `npm run dev`

## Migration

To migrate legacy CSV data to the new SQLite database:

1. Ensure the server is stopped or DB is accessible.
2. Run the migration script:
   ```bash
   python scripts/migrate_csv_to_sql.py
   ```
   This will scan `data/` for user folders (e.g. `12345/`) and import them into `finance.db`.

## Apple Shortcuts Setup

1. Log in to the Web App.
2. Go to **Settings**.
3. Click "Generate Export Token".
4. Copy the token.
5. In your Shortcut:
   - URL: `https://<your-domain>/api/transactions/parse`
   - Method: POST
   - Headers: `Authorization: Bearer <your-token>`
   - Body (JSON):
     ```json
     {
       "bank_message": "Shortcut Input",
       "bank_name": "UOB",
       "timestamp": "Current Date (ISO)",
       "remarks": "Optional"
     }
     ```
